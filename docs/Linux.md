# Linux

# Содержание

* [Файлы и директории](#файлы-и-директории)
    * [Узнать текущую рабочую директорию (pwd)](#узнать-текущую-рабочую-директорию)
    * [Навигация по директориям (cd)](#навигация-по-директориям)
    * [Просмотр содержимого директории (ls, tree)](#просмотр-содержимого-директории)
    * [Копирование файлов (cp)](#копирование-файлов)
    * [Перемещение файлов (mv)](#перемещение-файлов)
    * [Создание файла и директории (touch, mkdir)](#создание-файла-и-директории)
    * [Удаление файлов и директорий (rm)](#удаление-файлов-и-директорий)

* [Манипуляция с текстом](#манипуляция-с-текстом)
    * [Вывод содержимого файла (cat, tac)](#вывод-содержимого-файла)
    * [Просмотр первых строк файла (head)](#просмотр-первых-строк-файла)
    * [Просмотр последних строк файла (tail)](#просмотр-последних-строк-файла)
    * [Справочник по командам (man)](#справочник-по-командам)
    * [Вывод текста (echo)](#вывод-текста)
    * [Перенаправление потока](#перенаправление-потока)
    * [Поиск текста (grep)](#поиск-текста)
    * [Сортировка (sort)](#сортировка)
    * [Редактирование текста (sed)](#редактирование-текста)
    * [Поиск файлов (find)](#поиск-файлов)
    * [Awk](#awk)
    * [Подсчёт повторяющихся строк (uniq)](#подсчёт-повторяющихся-строк)
    * [Обрезка текста (cut)](#обрезка-текста)
    * [Замена символов (tr)](#замена-символов)
    * [Подсчёт количества строк и слов](#подсчёт-количества-строк-и-слов)

* [Права файлов](#права-файлов)
    * [Смена прав файла и директории (chmod)](#смена-прав-файла-и-директории)
    * [Смена владельца файла и директории (chown)](#смена-владельца-файла-и-директории)
    * [Смена группы файла и директории (chgrp)](#смена-группы-файла-и-директории)

* [Пользователи и группы](#пользователи-и-группы)
    * [Создание пользователя (useradd)](#создание-пользователя)
    * [Создание группы (groupadd)](#создание-группы)
    * [Управление пользователями (usermod)](#управление-пользователями)

* [Работа с жесткими дисками](#работа-с-жесткими-дисками)
    * [Просмотр свободного пространства (df)](#просмотр-свободного-пространства)

* [Архивирование и сжатие файлов](#архивирование-и-сжатие-файлов)
    * [tar](#tar)

* [Прочее](#прочее)
    * [Подключение по ssh](#подключение-по-ssh)
    * [Горячие клавиши в терминале](#горячие-клавиши-в-терминале)

<!-- * [Системная информация](#системная-информация) -->
<!-- > * [](#) -->
<!-- > * [](#) -->
<!-- > * [](#) -->


# Файлы и директории

## Узнать текущую рабочую директорию

[Наверх](#содержание)

Команда для того чтобы показать текущую рабочую директорию от корневой директории.

    pwd


## Навигация по директориям

[Наверх](#содержание)

Для перехода в директорию ниже. В основном используются относительные пути.

    cd <directory>

Либо можно использовать полный путь от начала.

    cd /path/to/directory

Для того чтобы вернуться на директорию выше.

    cd ..

Чтобы перейти в домашнюю директорию.

    cd

Либо знак `~` так же указывает на домашнюю директорию.

    cd ~


## Просмотр содержимого директории

[Наверх](#содержание)

Просмотр содержимого директории.

    ls

Для просмотра скрытых файлов (начинаются с `.`) используется флаг `-a`.

    ls -a

Для просмотра дополнительной информации об файлах -
права, количество ссылок, пользователь, группа, размер, дата и время создания.

    ls -l

Можно комбинировать флаги. В данном случае, будет вывод всех файлов с дополнительной информацией.

    ls -la

Рекурсивный вывод всех файлов.

    ls -R

Можно выводить содержимое определённой директории.

    ls <path-to-directory>

Для просмотра директории в древовидной форме используется команда `tree`.

Если просто ввести команду, то она выведет дерево из текущих директорий.

Так же можно передать аргумент для определённой директории.

    tree <directory>

Для вывода скрытых файлов используется опция `-a`.

    tree -a <directory>


## Копирование файлов

[Наверх](#содержание)

Команда для копирования обычных файлов.
Если новый файл не создан он его создаст, если был создан перезапишется.

    cp <file-name> <new-file-name>

Для копирования директории нужно использовать флаг `-r` для рекурсивного копирования.

    cp -r <-directory-name> <directory-name>


## Перемещение файлов

[Наверх](#содержание)

Для перемещения обычных файлов из одной директории в другую.

    mv <path-to-old-file> <path-to-new-file>

    # Пример
    mv /home/user/test/file.txt /home/user/file.txt

Так же можно переименовывать файлы.

    mv <old-file-name> <new-file-name>

Для перемещения директорий нужно использовать флаг `-r`.

    mv -r <directory-name> <directory-name>


## Создание файла и директории

[Наверх](#содержание)

Команда для создание обычного файла.

    touch <file-name>

Команда для создания директории.

    mkdir <directory-name>

Если требуется создать вложенные директории нужно использовать флаг `-p`.

    mkdir -p <path-to-directory>


## Удаление файлов и директорий

[Наверх](#содержание)

Удаление обычных файлов.

    rm <file-name> [<file-name> ...]

Для удаления директории есть специальная команда `rmdir`,
но она работает только тогда, когда директория пустая.
Поэтому обычно используется команда `rm` с ключём `-r`.

    rm -r <directory-name>

Для того чтобы команда показывала, что удалила используется флаг `-v`.

    rm -rv <file-name>

Для того чтобы команда игнорировала несуществующие файлы и аргументы используется флаг `-f`.

    rm -rf <file-name>


Если требуется чтобы команда спрашивала разрешение на удаление файла используется флаг `-i`.

    rm -ri <file-name>


# Манипуляция с текстом

## Вывод содержимого файла

[Наверх](#содержание)

Команда для вывода содержимого файла или файлов на консоль.

    cat <path-to-file> [<path-to-file> ...]

Так же есть обратная команда `tac`,
которая выводит текст наоборот - сначала последние строки, потом первые.

    tac <path-to-file>

## Просмотр первых строк файла

[Наверх](#содержание)

Для вывода первых строк файла используется команда `head`.

    head <file>

Флаг `-n` позволяет изменить количество выводимых строк.

    head -n 100 <file>


## Просмотр последних строк файла

[Наверх](#содержание)

Команда `tail` выводит последние строки в файле.
По стандарту команда выводит последние 10 строк.

    tail <file>

Флаг `-n` позволяет изменить количество выводимых строк.

    tail -n 100 <file>

Так же эта команда может отслеживать добавление новых строк в файл.
Для этого используется флаг `-f`.

    tail -f <file>

По умолчанию данные будут обновляться раз в секунду.
Это можно изменить с помощью флага `-s`.

    tail -f -s 5 <file>


## Справочник по командам

[Наверх](#содержание)

Если требуется посмотреть справочник по определённой команде -
как пишется, какие флаги можно использоавать и прочее.
Есть 2 команды для просмотра справочника - `man` и `info`.

    man <command>
    info <command>

Так же у многих команд, есть флаг `--help` или `-h`,
который тоже выдаёт справочник по команде.

    <command> --help


## Вывод текста

[Наверх](#содержание)

Для вывода текста используется команда `echo`.

    echo <text>


## Перенаправление потока

[Наверх](#содержание)

Ввод и вывод распределяется между тремя стандартными потоками:
* `stdin` — стандартный ввод, используется только для считывание данных.
* `stdout` — стандартный вывод, используется только для записи.
* `stderr` — стандартная ошибка, используется только для записи.

Потоки пронумерованы:
* `stdin` — 0.
* `stdout` — 1.
* `stderr` — 2.

Потоки можно подключать к чему угодно: к файлам, программам и даже устройствам.

Типы перенаправления:
* `>` - Перенаправление stdout в файл.
Если файл отсутствовал, то он создется, иначе перезаписывается.
* `>>` - Перенаправление stdout в файл.
Создается новый файл, если он отсутствовал, иначе дописывается в конец файла.
* `2>` - Перенаправление stderr в файл.
* `2>>` - Перенаправление stderr в файл, файл дозаписывается.
* `&>` - Перенаправление stdout и stderr в файл.
* `<` - Ввод из файла.

Операции перенаправления и конвейеры могут комбинироваться в одной командной строке.

    command < <input-file> > <output-file>


Для перенаправления вывода команды на другую команду используется pipe - `|`.

    command-1 | command-2 | .... | command-N


## Поиск текста

[Наверх](#содержание)

Поиск текста в файле или файлах происходит с помощью команды `grep`.

    grep [options ...] "pattern" [file ...]
    # или
    command | grep [options ...] "pattern"

    # Пример
    grep "text" file.txt

Популярные опции:

* `-c` - подсчёт количества вхождений паттерна.
* `-h` - не выводить имя файла.
* `-i` - не учитывать регистр при поиске.
* `-l` - отобразить только имена файлов, в которых найден шаблон.
* `-n` - показывать номер строки в файле.
* `-s` - не показывать сообщения об ошибках.
* `-v` - инвертировать поиск, выдавать все строки кроме тех, что содержат шаблон.
* `-w` - искать шаблон как слово, окружённое пробелами.
* `-e` - использовать регулярные выражения при поиске.
* `-r` - рекурсивно считывать все файлы в каждой директории.
* `-An` - показать вхождение и n строк до него.
* `-Bn` - показать вхождение и n строк после него.
* `-Cn` - показать n строк до и после вхождения.


## Сортировка

[Наверх](#содержание)

Команда `sort` занимается сортировкой текста.

    sort [options ...] <file>
    # или
    sort [options ...]

Популярные опции:

* `-b` - не будут учитываться пробелы.
* `-d` - использовать для сортировки только буквы и цифры.
* `-n` - сортировка строк по числовому значению.
* `-r` - сортировать в обратном порядке.
* `-с` - проверка, был ли отсортирован файл.
* `-o` - вывести результат в файл.
* `-u` - игнорировать повторяющиеся строки.
* `-k` - указать поле по которому нужно сортировать строки, если не задано,
сортировка выполняется по всей строке.
* `-t` - использовать в качестве разделителя полей ваш символ вместо пробела.

Пример:

    ls | sort -nk2


## Редактирование текста

[Наверх](#содержание)

Шаблон для изменения текста.

    sed [options ...] "[script]" [input-file ...]
    # или
    command | sed [options ...] "[script]"

Популярные опции:
* `-n` - не выводить содержимое буфера шаблона в конце каждой итерации.
* `-i` - делать резервную копию файла перед редактированием.

Команды `sed`:

`d` - удаляет буфер шаблона.

    # Пример
    sed "2,4d" test_file

`p` - вывести содержимое буфера шаблона.

    # Пример
    sed -n "2,4p" test_file

`s` - замена символов, поддерживаются регулярные выражения.

    sed "s/что_заменять/на_что_заменять/опции" <file>

    # Пример
    sed "2,4s/qwerty/123456/" test_file

В опциях можно указать `g`, тогда будет замена не первого вхождения в строке, а во всей строке.


## Поиск файлов

[Наверх](#содержание)

Одной из утилит для поиска является `find`.

Конструкция.

    find <папка> <параметры> <критерий> <шаблон> <действие>

Основные критерии для поиска:
* `-name` - поиск файлов по имени.
* `-iname` - поиск файлов по имени, без регистра.
* `-perm` - поиск файлов по доступу к файлу.
* `-user` - поиск файлов по владельцу.
* `-group` - поиск по группе.
* `-mtime` - поиск по времени модификации файла.
* `-atime` - поиск файлов по дате последнего чтения.
* `-newer` - найти файлы новее чем указанный.
* `-size` - поиск файлов в Linux по их размеру.
* `-empty` - поиск пустых файлов.

Критерий `-type` позволяет искать файлы по типу.

Виды файлов.
* `f` – простые файлы.
* `d` – каталоги.
* `l` – символические ссылки.
* `b` – блочные устройства.
* `c` – символьные устройства.
* `p` – именованные каналы.
* `s` – сокеты.

Поиск по размеру файла `-size`.
Виды.
* `+` — Поиск файлов больше заданного размера.
* `-` — Поиск файлов меньше заданного размера.
* Отсутствие знака значит размер файлов должен полностью совпадать.

Единицы измерения файлов:
c — Байт
k — Кбайт
M — Мбайт
G — Гбайт

Для объединения нескольких критериев в одну команду.
* -and
* -or
* -not

Действия после нахождения файлов.

* `-delete` - удаляет результаты поиска файлы.
* `-ls` - вывод более подробных результатов поиска с размером файлов и количеством inode.
* `-print` - стоит по умолчанию, Вывод полного пути к найденным файлам.
* `-exec` - выполняет указанную команду в каждой строке результатов поиска.

*Примеры:*

Показать все файлы в текущей директории.

    find .

Поиск по имени файла.

    find . -name *.txt

Не учитывать регистр.

    find . -iname test*

файлы, которые не соответствуют шаблону.

    find . -not -name "test*"

Удаление пустых файлов

    find . -empty -delete


## Awk

[Наверх](#содержание)

`awk` – это скриптовый язык,
который полезен при работе в командной строке и широко применяется для обработки текста.

Конструкция.

    awk options program file

Программа должна обязательно содержаться в одинарных кавычках.

Популярные опции:
* `-F "<fs>"` — позволяет указать символ-разделитель для полей в записи.
* `-f <file>` — указывает имя файла, из которого нужно прочесть awk-скрипт.
* `-v <var>=<value>` — позволяет объявить переменную и задать её значение по умолчанию,
которое будет использовать awk.

Позиционные переменные
* `$0` — представляет всю строку текста.
* `$1` — первое поле.
* `$2` — второе поле.
* `$n` — n-ное поле.
* `$NF` - последнее поле.
* `$(NF - 1)` - предпоследнее поле.

Дополнительные переменные в awk:
* `FS` — уже знакомая вам переменная, позволяющая задавать символ-разделитель полей.
* `RS` — переменная, которая позволяет задавать символ-разделитель записей.
* `OFS` — разделитель полей на выводе awk-скрипта.
* `ORS` — разделитель записей на выводе awk-скрипта.

Команда `print` выводит на консоль данные.

*Примеры:*

Вывод всех строк файла.

    awk '{print $0}' <file>

Вывод первого столбца файла.

    awk '{print $1}' <file>

Изменение символа разделителя.

    awk -F: '{print $1}' <file>

Указание источника команд из файла.

    awk -f <script-file> <file>

В awk перед скобками можно указать условие при котором будет обрабатываться строка.

    awk '/pattern/{action}' <file>

*Пример:*

Вывод строки, если 3 столбец будет больше 40.

    awk '$3 > 40 { print $0}' <file>

Вывод строки если встречается io.

    awk '/io/{print $0}' <file>

В awk можно выполнить действия до выполнения основного скрипта, и после выполнения его.

Ключевыми словоми являются слова `BEGIN` и `END`.

Конструкция:

    BEGIN {
    }
    {
    }
    END {
    }

Хорошей практикой считается писать большие скрипты awk в файле, для более удобного чтения.

*Пример:*

Подсчёт суммы по второй коллонке.

    awk 'BEGIN { sum = 0 } { sum += $2 } END { print sum }'

В awk существует свой if, которым можно обрабатывать действия.

Конструкция.

    if(conditional) {
    }
    else if(conditional) {
    }
    else {
    }

Так же если условие одно, скобки можно опустить.


## Подсчёт повторяющихся строк

[Наверх](#содержание)

Команда `uniq` может удалять, выводить количество повторяющихся строк.
Но для того чтобы uniq работал верно, нужно отсортировать файл.

Основные опции:
* `-c` - в начале строки выводится количество повторов строки.
* `-d` - если строка повторяется, она будет выведена один раз.
* `-D` - выводить только повторяющиеся строки.
* `-i` - игнорировать регистр.
* `-u` - выводить только те строки, где нет повторов.
* `-f` - (--skip-fields=N) будет сравнение только после N-ого поля.
* `-s` - (--skip-chars=N) будет сравнение только после N-ого символа.
* `-w` - (--check-chars=N) будет сравниваться только N символов с строке.


## Обрезка текста

[Наверх](#содержание)

Команда `cut` позволяет обрезать часть строки по расположению байта, символу и полю.

Основные опции:
* `-b` (--bytes=LIST) - номер байта, набор или диапазон байтов, которых нужно обрезать.
* `-c` (--characters=LIST) - символ, который следует вырезать.
Так же можно указать дипазон символов.
* `-d` (--delimiter=DELIM) - устанавливается свой разделитель вместо стандартного.
* `-f` (--fields=LIST) - перечень полей для вырезания.
* `-s` (--only-delimited) - cut не выводит строки, где нет разделителя.
* `--complement` - оставляет все поля кроме выбранных.
* `--output-delimiter` - выходной разделитель.

*Примеры:*

Вырезать первое и третье поле. (По стандарту разделяется либо пробел, либо tab)

    cut -f 1,3

Смена разделителя.

    cut -d ':' -f 1,3

Показать все поля кроме первого и третьего.

    cut -f 1,3 --complement

Смена разделителя на нижнее подчёркивание после обрезания.

    cut -f 1,3 --output-delimiter='_'


## Замена символов

[Наверх](#содержание)

Для удаления и замены символов используется команда `tr`.

Опции:
* `-c` - оставляет все символы из первого набора, и меняет второй набор.
* `-d` - удалить символы из первого набора.
* `-s` - заменять набор символов, которые повторяются, из указанных в последнем наборе знаков.
* `-t` - созкращение первого набора до втрого набора.

*Примеры:*

Сменить регистр букв.

    tr "a-z" "A-Z"

Удалить букву s из строки.

    tr -d "s"

Если симоволы не равны abcd, то заменить их на z.

    tr -c "abcd" "z"


## Подсчёт количества строк и слов

[Наверх](#содержание)

Команда `wc` может подсчитывать количество слов, строк, байт и символов в файле.

Опции:
* `-c` - Отобразить размер объекта в байтах.
* `-m` - Показать количесто символов.
* `-l` - Вывести количество строк.
* `-w` - Отобразить количество слов.

Конструкция.

    wc <file>

*Примеры:*

Подсчёт количества строк в файле.

    cat <file> | wc -l

Подсчёт количества слов в файле.

    cat <file> | wc -w


# Права файлов

## Смена прав файла и директории

[Наверх](#содержание)

Для смены прав используется команда `chmod`.

Права доступа в Linux.
* `r` - чтение.
* `w` - запись.
* `x` - выполнение.

Категории пользователей.
* `u` - владелец файла.
* `g` - группа файла.
* `o` - все остальные пользователи.

В качестве действий используются знаки `+` - включить, `-` - отключить или `=` - присвоить.

Примеры:

    chmod u+x <file> # разрешить выполнение для владельца.
    chmod ugo+x <file> # разрешить выполнение для всех.
    chmod ug+w <file> # разрешить запись для владельца и группы.
    chmod o-x <file> # запретить выполнение для остальных пользователей.
    chmod o=r <file> # разрешить остальным пользователям чтение.
    chmod ugo+rwx <file> # разрешить все для всех.

Права так же можно задавать восьмеричным форматом записи.

* `0` - никаких прав.
* `1` - только выполнение.
* `2` - только запись.
* `3` - выполнение и запись.
* `4` - только чтение.
* `5` - чтение и выполнение.
* `6` - чтение и запись.
* `7` - чтение запись и выполнение.

Так же можно для счёта использовать вариант со сложением.

* `r` - 4
* `w` - 2
* `x` - 1

Примеры:

    chmod 744 <file> # разрешить все для владельца, а остальным чтение.
    chmod 755 <file> # все для владельца, остальным чтение и выполнение.
    chmod 764 <file> # все для владельца, чтение и запись для группы, и чтение для остальных.
    chmod 777 <file> # всем разрешено всё.


Можно изменять права у директории,
и чтобы у применилось у всех входящий файлов нужно использовать флаг `-R`.

    chmod -R 700 <file>


## Смена владельца файла и директории

[Наверх](#содержание)

С помощью команды `chown` можно изменять владельца файла или директории.

Для смены владелельца файла.

    chown <new-owner> <file>

Так же с помощью этой команды можно сразу сменить и владельца и группу.
Нужно через двоиточее указать, сначала владельца, потом группу.

    chown <new-owner>:<new-group> <file>

Можно изменять права у директории,
и чтобы у применилось у всех входящий файлов нужно использовать флаг `-R`.

    chown -R <new-owner> <directory>

Если требуется изменить только те файлы, у которых определённый владелец,
для этого используется флаг `--from`.

    chown --from=<old-owner>:<old-group> <new-owner>:<new-group> -R <directory>


## Смена группы файла и директории

[Наверх](#содержание)

Для смены группы используется команда `chgrp`.

    chgrp <new-group> <file>

Для смены группы у директории, так же можно использовать флаг `-R`.

    chgrp -R <new-group> <directory>


# Пользователи и группы

## Просмотр информации об пользователе

[Наверх](#содержание)

Команда `id` позволяет просмотреть информацию об пользователе
и группах в которых он находится.

Опции.

* `-u / --user` - вывести действующий идентификатор пользователя.
* `-g / --group` - вывести индефикатор основной группы.
* `-G / --groups` - вывести индефикаторы всех групп.
* `-n / --name` - вместо id выводить имя пользователя или группы. 
* `-Z / --context` - распечатать контекст безопасности. 

*Примеры:*

Печатает индефикатор пользователя (uid),
индефикатор основной группы польззователя (gid) и
индефикаторы дополнительных групп (groups).

    id

Получения информации об другом пользователе.

    id user

Посмотреть группы у пользователя.

    id user -G

Посмотреть группы у пользователя в имени.

    id user -nG


## Создание пользователя

[Наверх](#содержание)

Команда для создания нового пользователя.

    sudo useradd <username>

Основные опции:
* `-c` - комментарий для новой учётной записи.
* `-d` - добавить домашнюю директорию по определённому пути.
* `-D` - показать стандартные настройки для добавления пользователя.
Хранятся по пути `/etc/default/useradd`.
* `-f` - период неактивности пароля новой учётной записи
* `-e` - создать пользователя с истечением срока. Дата должна быть в формате `YYYY-MM-DD`.
* `-g` - имя или ID главной группы пользователя.
* `-G` - список для дополнительных групп пользователя.
* `-m` - создать домашний каталог пользователя.
* `-u` - задать собсвенный uid для пользователя.

*Примеры:*

Создать пользователя и домашнюю директорию.

    useradd -m <username>

Создать домашнюю директорию по альтернативному пути.

    useradd -m -d <all-directory-path> <username>

Создать пользователя с определённым uid.

    useradd -u <number-uid> <username>

Поставить основную группу пользователя.

    useradd -g <number-gid> <username>
    # или можно через имя группы
    useradd -g <name-gid> <username>

Назначить дополнительные группы для пользователя.

    useradd -g <main-number-gid> -G <group1-gid>,<group2-gid> <username>
    # или можно через имя группы
    useradd -g <main-number-name> -G <group1-name>,<group2-name> <username>

Добавление пользователю комментарий.

    useradd -c "<comment>" <username>

Создать пользователя с истечением срока.

    useradd -e <date> <username>

Для проверки срока действия учётной записи используется команда `chage`.

    chage -l <username>


## Создание группы

[Наверх](#содержание)

Для создания группы используется команда `groupadd`.

    groupadd <group-name>

После этого будет создана группа,
с настройками по умолчанию, указанных в `/etc/login.defs`.

Для создания группы с определённым gid, нужно использовать флаг `-g` или `--gid`.
Если группа с таким номером существует будет ошибка.

    groupadd -g <number> <group-name>

Для создания системной группы используется опция `-r` или `--system`.

    groupadd -r <system-group-name>


## Управление пользователями

[Наверх](#содержание)

Для изменения настроек пользователя используется команда `usermod`.

Основные опции.
* `-a` добавить пользователя в дополнительную группу.
Опция работает только вместе с -G.
* `-d` – указать новое местоположение домашнего каталога пользователя.
* `-e` – указать дату, при наступлении которой учетная запись будет отключена.
Если указать опцию без даты, то отключение пользователя будет отменено.
* `-f` – установить количество дней для блокировки пользователя,
которое должно пройти после устаревания пароля.
* `-g` – выбрать новую основную группу для пользователя и для файлов в его домашнем каталоге.
* `-G` – указать список дополнительных групп, в которые должен входить пользователь.
* `-l` – изменить имя пользователя на новое.
Данная опция не затрагивает никакие другие данные.
* `-L` – заблокировать пароль пользователя.
* `-m` – изменить местоположение домашнего каталога пользователя.
Опция работает только вместе с -d.
* `-p` – изменить пароль в зашифрованном виде.
* `-s` – указать новую командную оболочку shell для пользователя.
* `-u` – изменить параметр UID (числовой идентификатор пользователя).
* `-U` – разблокировать пароль пользователя.

# Работа с жесткими дисками

## Просмотр свободного пространства

[Наверх](#содержание)

Команда `df` нужна для просмотра свободного дискового пространства.

Опции.

* `-a` - отобразить все файловые системы.
* `-B` - изменить размер одного блока перед выводом данных.
* `-h` - выводить размеры в читаемом виде, в мегабайтах или гигабайтах.
* `-i` - выводить информацию об inode.
* `-P` - использовать формат вывода POSIX.
* `--total` - выводить всю информацию про использованное и доступное место.
* `-t` - выводить информацию только про указанные файловые системы.
* `-x` - выводить информацию обо всех, кроме указанных файловых систем.

*Примеры:*

Посмотреть доступное просторанство на примонтированных разделах.

    df

Вывести удобную информацию для чтения.

    df -h

Вывести информацию в Мегабайтах.

    df -BM

Вывести все файловые системы кроме tmpfs.

    df -x tmpfs


## Просмотр занятого пространства

[Наверх](#содержание)

Команда `du` нужна для просмотра занятого дискового пространства.

* `-a / --all` - выводить размер для всех файлов, а не только для директорий.
* `-B` - указать единицы вывода размера.
* `-c / --total` - выводить в конце общий размер всех папок.
* `-d / --max-depth` - максимальная глубина вложенности директорий.
* `-h` - выводить размер в единицах измерения удобных для человека.
* `-s / --summarize` - выводить только общий размер.
* `--time` - отображать время последней модификации для файла.
* `-X / --exclude` - исключить файлы из подсчёта.
* `-x /--one-file-system` - пропускать примонтированные файловые системы.

*Примеры:*

Посмотреть занятное просторанство в текущей директории.

    du

Просмотр занятого пространства определённой директории.

    du /var/log

Вывести удобную информацию для чтения.

    du -h /var/log

Вывести информацию в Мегабайтах.

    du -BM /var/log

Вывести только общий размер директории.

    du -hs /var/log


# Архивирование и сжатие файлов

## tar

[Наверх](#содержание)

Архивация файлов.

    tar [options ...] <archive-name>.tar <file-name> [<file-name> ...]

Опции:

* `-c / --create` - создать новый архив.
* `-A / --concatenate` - Присоединить существующий архив к другому.
* `-t / --list` - Сформировать список содержимого архива.
* `-d / --diff` Проверить различие между архивами.
* `--delete` Удалить из существующего архива файл.
* `-u / --update` Обновить архив более новыми файлами с тем же именем.
* `-x / --extract` - Извлечь файлы из архива.


# Прочее

## Подключение по ssh

[Наверх](#содержание)

Настройка ssh файла.
Файл для настройки находится по пути `/etc/ssh/sshd_config`.
Открывать нужно с `root` правами.

    sudo vim /etc/ssh/sshd_config

Порт задаётся строчкой.

    Port 22

Доступ по ssh только определённым пользователям или группам.

    AllowUsers User1, User2, User3
    AllowGroups Group1, Group2, Group3

Разрешение авторизации по ключу.

    PubkeyAuthentication yes

Разрешение авторизации по паролю.

    PasswordAuthentication no

Для того чтобы можно было подключаться под root.

    PermitRootLogin yes

После изменения настроек требуется перезапустить sshd.

    sudo systemctl restart sshd.service

Есть 2 варианта подключение по ssh, по паролю и ключу RSA.
По стандарту используется порт 22.

По паролю, при первом подключении требуется подтверждение.

    ssh user@host

Для определения хоста используются команды.

    ifconfig
    ip a s

Если требуется выполнить только одну команду.

    ssh user@host command

Аутентификация по ключу.

Создание ключа.

    ssh-keygen -t rsa

Отправка ключа на сервер, после этого пароль запрашиваться не будет.

    ssh-copy-id user@host

Передача файлов по ssh.

    # передача файла
    scp /path/to/file user@host:/directory
    scp -r /path/to/directory user@host:/directory


## Горячие клавиши в терминале

[Наверх](#содержание)

Общее.

* `Tab` - автодополнения в терминале.
* `Ctrl + L` - очистить весь вывод терминала.
* `Ctrl + S` - приостановить вывод терминала.
* `Ctrl + Q` - возобновить вывод если он был приостановлен.
* `Ctrl + C` - отправить команде сигнал SIGINT для её завершения.
* `Ctrl + Z` - отправить команде сигнал SIGSTP для остановки.

История команд.

* `Стрелки вверх и вниз` - используются для перемещения вперед и назад по истории команд.
* `Ctrl + r` - можно использовать для поиска по истории команд.
* `Ctrl + p` - предыдущая команда в истории команд.
* `Ctrl + n` - следующая команда в истории команд.
* `Ctrl + g` - если вы находитесь в режиме поиска, завершает поиск.
* `Ctrl + o` - выполнить найденную поиском команду.
* `Alt + .` - использовать последнее слово предыдущей команды.

Перемещение курсора.

* `Ctrl + a` - перейти в начало строки.
* `Ctrl + e` - перейти в конец строки.
* `Alt + b` - перейти влево на одно слово.
* `Alt + f` - перейти в право на одно слово.
* `Ctrl + b` - перейти влево на один символ.
* `Ctrl + f` - перейти вправо на один символ.
* `Ctrl + xx` - перейти в конец или в начало строки.

Редактирование.

* `Ctrl + u` - вырезать строку до позиции курсора.
* `Alt + Del` - удалить слово перед курсором.
* `Alt + d` - удалить слово после курсора.
* `Ctrl + d` - удалить символ под курсором.
* `Ctrl + h` - удалить символ под курсором.
* `Ctrl + w` - вырезать слово под курсором.
* `Ctrl + k` - вырезать строку от позиции курсора до конца строки
* `Alt + t` - поменять текущее слово с предыдущим.
* `Ctrl + t` - поменять местами два символа перед курсором.
* `Esc + t` - поменять местами два слова перед курсором.
* `Ctrl + y` - вставить то, что было вырезано.
* `Alt + u` - сделать верхний регистр символов от позиции курсора до конца текущего слова.
* `Alt + l` - сделать нижний регистр символов от позиции курсора до конца слова.
* `Alt + c` - перевести символ под курсором в верхний регистр и перейти к концу слова.
* `Alt + r` - вернуть строку в исходное состояние.
* `Ctrl + _` - отменить последнее действие со строкой.
